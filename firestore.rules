rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Projects collection - Only authenticated users can read/write their own data
    match /projects/{projectId} {
      // Allow read and write if user is authenticated
      allow read, write: if request.auth != null && 
                             request.auth.uid == resource.data.userId;
      
      // Allow create if user is authenticated
      allow create: if request.auth != null;
    }
    
    // Contractors collection (if you add contractor management to cloud)
    match /contractors/{contractorId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // Bids collection (if you add bid tracking to cloud)
    match /bids/{bidId} {
      allow read, write: if request.auth != null && 
                             request.auth.uid == resource.data.userId;
      allow create: if request.auth != null;
    }
    
    // User profiles
    match /users/{userId} {
      allow read, write: if request.auth != null && 
                             request.auth.uid == userId;
    }
  }
}

/* 
INSTRUCTIONS TO APPLY THESE RULES:

1. Go to Firebase Console: https://console.firebase.google.com
2. Select your project: naples-791-build
3. Click on "Firestore Database" in the left menu
4. Click on the "Rules" tab at the top
5. Replace the existing rules with the content above
6. Click "Publish" to save the changes

WHAT THESE RULES DO:

âœ… Security Features:
- Users must be logged in to access data
- Users can only see/edit their own project data
- Prevents unauthorized access to your construction data
- Allows collaborative access if multiple users created

ðŸ”’ Access Control:
- Authenticated users can create new projects
- Users can only modify projects they created
- Read access limited to data owners
- Protects sensitive construction information

ðŸ’¡ Best Practices:
- Never share your Firebase credentials publicly
- Create separate accounts for different team members
- Regularly review Firestore usage in console
- Monitor authentication logs for suspicious activity

TESTING YOUR RULES:

After applying rules, test with:
1. Log in to your site
2. Save project data
3. Log out and try to access - should fail
4. Log back in - data should load successfully

This confirms your data is properly secured!
*/
